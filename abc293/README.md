# [ABC293](https://atcoder.jp/contests/abc293)

- [問題](https://atcoder.jp/contests/abc293/tasks)
- [提出](https://atcoder.jp/contests/abc293/submissions?f.User=Jessica_nao_)

## 2023/03/18

- ブランクがありすぎる故にポンコツすぎて笑ったけど、弊社に3月に来てくれた人が競プロ始めると言っていたから私も再開🚀
  - [https://twitter.com/Jessica\_nao\_/status/1634114521072832514:embed#「明日のABC出ようかな〜」って言うようなバックエンドエンジニアの人が今月入社してくれて、非常に嬉しいです私🥹日頃会う人でやる人がいるって、やっぱり格別だね！！！明日はリアタイでは出られないけど、少なくとも解くぞ🚀]
  - 自分もちょっとRubyでやってみたかったのと、その人に合わせて、せっかくなのでRubyを使ってみる
- 調べてみると、Rubyで青になった人が居るのを知ってびっくり！
  - [https://kona0001.hatenablog.com/entry/2022/01/29/182431:embed:cite]
- 久しぶりにやると、ちょっと解いただけでも、競プロと業プロの違いを痛感する……！
  - 名付けとか、わざわざインスタンスを新しく作らないとか

### A

- `chomp` しないといけないのを忘れてて、ちょっと止まった
  - Pythonの癖が抜けないのかな
- 三項演算子使えばシュッとかけるの最初からは見えなかった
  - とても悲しい
- 新しい配列を作り直さないで、順番に出力してしまえば良い
  - でもこれってかなり競プロ的だよね……！

### B

- `String#split`
  - 引数がデフォルトで `' '` なの忘れてた
  - 前後の空白を削除してくれるから、`chomp`しなくて良いのも忘れてた

### C

- [rubyではbit全探索よりcombination全列挙のほうが早かった](https://hai3.net/blog/ruby-bit-search-vs-combination/) を参照
- `Array#filter{hoge}.size` は、`Array#count{hoge}` でOK
- Array などを空で用意して `each` で追加していくのなら、初めから [`Enumarable#each_with_object`](https://docs.ruby-lang.org/ja/latest/method/Enumerable/i/each_with_object.html) を使うのが良い！
  - 以前業務でやったやつを使えた〜！
- `Set#add?` も前に使った記憶あるなぁ（しみじみ）
  - `require set` しないといけないの悲しい
- 縦と横を間違えて、1ペナもらったの痛すぎる〜！！！
- debug 用に、`pp` をたくさん仕込んだ😎

### D

- 自分の端が、それぞれ繋がっているかだけ管理すれば良さそう
  - 最初、どのグループに所属しているかも考える必要があるかなと思ったけど、そんなことはなかった
    - 環状になっているもの、そうでないものの数だけ出せば良いから
  - 「最後にまとめて集計すれば良い」と最初は思ったけど、そうじゃなかったことには注意だ
    - 環状の方は、環状になった時にカウントしていけば良いね！
    - 環状になっていないものは、左端だけ数えればok
- 2回と同じ端が出てこないのすごい嬉しい！
  - だいぶ実装を軽くしてくれている😭
- 色々考えていたけど、結局UnionFindも必要やんけ！
  - 元々その2本が同じグループに入っていて繋がりcycleになるのか、そうでないのかの判定が必要だ〜！
  - 参考
    - [Rubyスタイルガイドを読む: クラスとモジュール（1）構造](https://techracho.bpsinc.jp/hachi8833/2017_02_27/36206)
    - [いつRubyでUnion-Findしたくなっても安心!](https://qiita.com/k_karen/items/5349a25c3eb7b4697f58)
  - 条件がかなり優しいから、両端がどうとかの管理は不要だった〜！
    - すでに結ばれている端が登場することがないとか
      - つまり、両端を区別しないでよかった。。。
- `attr_reader` にすべきか、 `attr_accessor` にするかは悩むけど、とりあえず `attr_accessor` にしておいた！
- いきなりUnionFindを準備できたのはラッキー！

### *E

- 周期性があるやつね！！と思ったけど、m が大きすぎるからこれはだめ
- 割り算ができれば良いけど、 m と a-1 が互いに素かわからん
- 繰り返し二乗法の応用を頑張る！
- Ruby の場合は、`Interger#pow` がめっちゃ便利じゃないか！！
- [kyopro_friendsさんの解説](https://atcoder.jp/contests/abc293/editorial/5966) 天才すぎる
